/**
 * 
 * bs-dropzone v0.2
 *
 * https://github.com/wilnicho/bs-dropzone.js
 * 
 * copyright (c) 2020 wilfredo nina choquetarqui
 * 
 */

"use strict";jQuery.fn.extend({bs_dropzone:function(e){let a,o,s,t,r,n,l,i,p,d,c,g,h,b;d={preview:!1,allowed:["jpg","jpeg","png","bmp","webp","jfif","svg","ico","gif"],accepted:[],dropzoneTemplate:'<div class="bs-dropzone"><div class="bs-dropzone-area"></div><div class="bs-dropzone-message"></div><div class="bs-dropzone-preview"></div></div>',parentTemplate:'<div class="row"></div>',childTemplate:'<div class="col"></div>',boxClass:"alert text-center",imageClass:"img-fluid",noneColorClass:"alert-info",dragColorClass:"alert-warning",doneColorClass:"alert-success",failColorClass:"alert-danger",language:{emptyText:"[arrastre los archivos aquí o haga clic para cargar]",dragText:"[suelte los archivos aquí]",dropText:"[_t_ archivos cargados]"},change:function(){}},e=$.extend({},d,e),a=this,this.each(function(a){null==(o=$(this)).attr("accept")&&e.accepted.length>0&&o.attr("accept","."+e.accepted.join(", .")),o.after(e.dropzoneTemplate),o.appendTo(o.next().find(".bs-dropzone-area")),(s=$("<div></div>")).attr("class","bs-dropzone-box "+e.boxClass+" "+e.noneColorClass).text(e.language.emptyText),o.before(s),o.on("dragover",function(){$(this).prev().attr("class","bs-dropzone-box "+e.boxClass+" "+e.dragColorClass).text(e.language.dragText)}).on("dragleave drop",function(){r=$(this),c=this.files,r.prev().attr("class","bs-dropzone-box "+e.boxClass+" "+e.noneColorClass).text(c.length>0?e.language.dropText.replace(/_t_/g,c.length):e.language.emptyText),r.trigger("blur")}).on("change",function(){(r=$(this)).trigger("preview"),r.trigger("blur"),e.change.call(this,r,this.files)}).on("preview",function(){r=$(this),t=r.prev(),(n=r.closest(".bs-dropzone").find(".bs-dropzone-preview")).empty(),c=this.files,g=!1,c.length>0?(e.preview&&(l=$(e.parentTemplate),$.each(c,function(a){b=(b=c[a].name.match(/\.[0-9a-z]+$/i))?b[0].split(".").pop().toLowerCase():null,$.inArray(b,e.allowed)+1>0&&((h=new FileReader).onload=function(a){p=$('<img src="'+a.target.result+'" class="'+e.imageClass+'">'),(i=p.wrap(e.childTemplate).parent()).appendTo(l)},h.readAsDataURL(this),g=!0)}),g&&(l.appendTo(n),n.show())),t.text(e.language.dropText.replace(/_t_/g,c.length))):(n.hide(),t.text(e.language.emptyText))}).on("clear",function(){r=$(this),t=r.prev(),n=r.closest(".bs-dropzone").find(".bs-dropzone-preview"),t.attr("class","bs-dropzone-box "+e.boxClass+" "+e.noneColorClass).text(e.language.emptyText),n.empty(),n.hide()}).on("validation",function(a,o){r=$(this),t=r.prev(),n=r.closest(".bs-dropzone").find(".bs-dropzone-preview"),o?t.attr("class","bs-dropzone-box "+e.boxClass+" "+e.doneColorClass):(t.attr("class","bs-dropzone-box "+e.boxClass+" "+e.failColorClass),n.hide()),r.css("height",t.outerHeight())}),o.closest("form").on("reset",function(){$(this).find(":file").each(function(){$(this).trigger("clear")})})})}});